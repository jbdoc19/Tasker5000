<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tasker 5000</title>
  <link rel="stylesheet" href="styles/main.css">

</head>
<body>
  <div id="toastContainer" class="toast-container" aria-live="polite"></div>

  <section
    id="meltdownShield"
    class="meltdown-shield hidden"
    aria-live="polite"
    aria-label="Meltdown Shield Panel"
    aria-hidden="true"
  >
    <h4 class="meltdown-shield-header">üõ°Ô∏è‚ÄØMeltdown Shield Activated</h4>
    <div id="meltdownShieldPrompt" class="meltdown-shield-prompt" aria-live="assertive"></div>
    <ul id="meltdownShieldSteps"></ul>
    <div class="meltdown-shield-actions">
      <button id="meltdownShieldNext" type="button">‚ñ∂Ô∏è‚ÄØNext</button>
      <button type="button" onclick="deactivateShield()">‚ùå‚ÄØClose</button>
    </div>
  </section>

  <section id="capture">
    <div class="app-shell">
      <header class="app-header">
        <div class="app-header__row app-header__row--top">
          <p id="headerDate" class="app-header__date"></p>
          <div class="app-header__actions">
            <p class="billing-reminder" id="billingReminder"></p>
            <button
              id="settingsToggle"
              class="settings-trigger"
              type="button"
              aria-haspopup="true"
              aria-expanded="false"
              aria-controls="settingsMenu"
              title="Open settings"
            >
              ‚öôÔ∏è
            </button>
          </div>
        </div>
        <div id="settingsMenu" class="settings-menu" aria-hidden="true">
          <div class="settings-menu__section">
            <label class="settings-menu__toggle" for="routineHapticsToggle">
              <span>Enable haptic nudges</span>
              <input type="checkbox" id="routineHapticsToggle" />
            </label>
          </div>
          <button type="button" class="settings-menu__item" id="settingsTemplates">
            <span aria-hidden="true">üß©</span>
            <span>Templates</span>
          </button>
        </div>
        <p id="headerSubtitle" class="app-header__subtitle"></p>
        <div class="app-header__row app-header__row--title">
          <h1>Tasker 5000</h1>
        </div>
      </header>
  </section>
<!-- Legacy header block replaced by .focus-command-deck -->
<!--
<div class="starter-stack" id="starterStack">
  <div class="starter-micro-header" role="banner">
    <button
      id="nextTaskActionButton"
      class="btn hero-cta start-action next-task-start"
      type="button"
      aria-describedby="nextTaskActionHint"
    >
      Start 5-min
      <span id="nextTaskActionHint" class="visually-hidden">Long-press for quick capture.</span>
    </button>
    <div id="nextTaskChips" class="starter-fit-chips" aria-live="polite"></div>
    <button
      id="rescueLaunchButton"
      class="btn starter-rescue"
      type="button"
      aria-haspopup="dialog"
      aria-controls="sosOverlay"
      aria-expanded="false"
    >
      üõü Rescue
    </button>
  </div>
</div>
-->
<section class="focus-command-deck" id="focus-command-deck" aria-label="Focus Command Deck">
  <div class="focus-top">
    <h2 class="focus-title">‚öîÔ∏è Focus Command Deck</h2>
    <div class="focus-meter" aria-label="Momentum Meter">
      <div class="focus-meter__header">
        <span class="meter-label">Momentum</span>
        <small class="meter-note">
          <span class="cm-done">12</span> / <span class="cm-total">57</span> complete
        </small>
      </div>
      <div class="progress-strip">
        <span class="cm-fill" style="width:21%"></span>
        <span class="cm-float" aria-live="polite">21% complete</span>
      </div>
    </div>
  </div>

  <div class="focus-actions">
    <button
      id="nextTaskActionButton"
      class="hero-cta start-btn start-action"
      type="button"
      data-action="start-5"
      aria-describedby="nextTaskActionHint"
    >
      ‚ñ∂ Start 5-Min Sprint
      <span id="nextTaskActionHint" class="visually-hidden">Long-press for quick capture.</span>
    </button>
    <button
      id="rescueLaunchButton"
      class="btn-quiet rescue-btn"
      type="button"
      data-action="rescue"
      aria-haspopup="dialog"
      aria-controls="sosOverlay"
      aria-expanded="false"
    >
      üõü Rescue Mode
    </button>
    <button
      id="quickTaskShortcut"
      class="btn-quiet quick-task-shortcut"
      type="button"
      aria-controls="quickTasksCard"
    >
      ‚è© Quick Tasks
    </button>
    <button
      id="shredTopTaskButton"
      class="btn-quiet shred-top-task"
      type="button"
      aria-disabled="true"
      disabled
    >
      üî∞ shred Top Task
    </button>
  </div>

  <footer class="focus-footer">
    <p class="focus-micro">üí° Tip: Five minutes is all you need to start momentum.</p>
  </footer>
</section>

<nav class="quick-add-menu" aria-label="Quick add templates">
  <p class="quick-add-menu__label">Quick Add</p>
  <div class="quick-add-menu__buttons" role="group" aria-label="Quick add buttons">
    <button class="quick-add-button quick-add-button--plus" type="button" aria-label="Quick add new task">‚ûïÔ∏è</button>
    <button class="quick-add-button quick-add-button--cherry" type="button" aria-label="Quick add cherry template">üçí</button>
    <button class="quick-add-button quick-add-button--muscle" type="button" aria-label="Quick add muscle template">üí™</button>
    <button class="quick-add-button quick-add-button--unicorn" type="button" aria-label="Quick add unicorn template">ü¶Ñ</button>
    <button class="quick-add-button quick-add-button--home" type="button" aria-label="Quick add home template">üè°</button>
    <button class="quick-add-button quick-add-button--kiddo" type="button" aria-label="Quick add kiddo template">üßí</button>
  </div>
</nav>

        <section id="nextTaskCard" class="card next-task-card hidden" aria-live="polite">
          <header class="card-head next-focus-head">
            <div class="next-focus-head__titles">
              <h2 class="focus-title">Next focus</h2>
              <p class="next-focus-hint">
                Next best: <span id="focusLaunchHint">Add a task to unlock focus.</span>
              </p>
            </div>
            <span id="nextTaskScore" class="chip chip-muted next-task-fit hidden"></span>
          </header>
          <span id="focus-engine" class="zone-anchor" aria-hidden="true"></span>
          <p id="nextTaskName" class="next-task-name"></p>
          <p id="nextTaskSubstep" class="next-task-meta"></p>
          <p id="nextTaskEmpty" class="next-task-empty hidden">You're clear for now. Add what matters next.</p>
          <div class="next-best-inline">
            <div class="next-best-toolbar" role="toolbar" aria-label="Next best options">
              <button id="nextBestRefresh" class="btn btn-ghost next-best-refresh" type="button">Refresh</button>
              <button
                id="nextBestAdjustToggle"
                class="quick-pill"
                type="button"
                aria-expanded="false"
                aria-controls="nextBestControls"
              >
                Adjust
              </button>
              <button id="nextBestStuck" class="quick-pill" type="button">I'm stuck</button>
            </div>
            <div id="nextBestControls" class="next-best-controls" hidden aria-hidden="true">
              <div class="next-best-controls__form">
                <label for="nextBestTime">
                  Time available
                  <select id="nextBestTime">
                    <option value="10">10 minutes</option>
                    <option value="15" selected>15 minutes</option>
                    <option value="20">20 minutes</option>
                    <option value="30">30 minutes</option>
                  </select>
                </label>
                <div class="next-best-energy">
                  <label for="nextBestEnergy">Energy right now</label>
                  <input
                    id="nextBestEnergy"
                    data-field="energy-level"
                    type="range"
                    min="1"
                    max="5"
                    step="1"
                    value="3"
                    aria-label="Energy right now"
                  />
                  <div class="next-best-meter">
                    <div class="next-best-meter__fill" id="nextBestEnergyFill"></div>
                    <div class="next-best-meter__scale">
                      <span aria-hidden="true">low</span>
                      <span aria-hidden="true">max</span>
                    </div>
                  </div>
                </div>
                <label for="nextBestDeadline">
                  Deadline urgency
                  <select id="nextBestDeadline"></select>
                </label>
                <label for="nextBestSize">
                  Task size
                  <select id="nextBestSize">
                    <option value="any" selected>Any size</option>
                    <option value="small">Quick win (&lt; 15 min)</option>
                    <option value="medium">Medium (15‚Äì30 min)</option>
                    <option value="large">Deep work (&gt; 30 min)</option>
                  </select>
                </label>
                <fieldset class="nbt-frictions">
                  <legend class="visually-hidden">Friction filters</legend>
                  <label>
                    <input type="checkbox" name="nextBestFriction" value="context" />
                    Needs certain location
                  </label>
                  <label>
                    <input type="checkbox" name="nextBestFriction" value="conversation" />
                    Needs another person
                  </label>
                  <label>
                    <input type="checkbox" name="nextBestFriction" value="energy" />
                    Energy heavy
                  </label>
                  <label>
                    <input type="checkbox" name="nextBestFriction" value="startup" />
                    High startup cost
                  </label>
                </fieldset>
              </div>
            </div>
            <div id="nextBestResults" class="next-best-results"></div>
            <p id="nextBestEmpty" class="next-best-empty hidden">Add a task to see your next best options.</p>
          </div>
        </section>
      
      <div class="momentum-zones">
        <section id="actionZone" class="momentum-zone" data-zone="action">
          <header class="zone-header" data-zone-tab>
            <span class="zone-header__icon" aria-hidden="true">‚ö°</span>
            <div class="zone-header__text">
              <h2 class="zone-header__title">Action Zone</h2>
              <p class="zone-header__subtitle">Next best focus, active tasks, and due-today radar</p>
            </div>
          </header>
          <div class="zone-body">
            <span id="tasks-zone" class="zone-anchor" aria-hidden="true"></span>
      <section class="card due-today-card hidden" aria-live="polite" data-due-today-section>
        <div class="section-heading">
          <h2>Due today</h2>
          <span class="chip chip-muted section-chip">Ready today</span>
        </div>
        <div class="due-today-accordion" data-open="false" data-accordion="dueToday">
          <button class="due-today-summary" type="button" aria-expanded="false" data-accordion-summary>
            <span data-due-today-summary-text>0 ready ‚Ä¢ est ‚Äî</span>
            <span class="due-today-summary__icon" aria-hidden="true">‚ñ∏</span>
          </button>
          <div class="due-today-list" hidden data-accordion-panel data-due-today-list></div>
        </div>
        <p class="due-today-empty hidden" data-due-today-empty>Nothing due today. You're caught up.</p>
      </section>


      <section class="card quick-tasks-card hidden" aria-live="polite" data-quick-tasks-card id="quickTasksCard">
        <span id="quickTasksAnchor" class="zone-anchor" aria-hidden="true"></span>
        <header class="quick-tasks-header">
          <h2 class="focus-title">Quick Tasks</h2>
        </header>
        <p class="quick-task-empty hidden" id="quickTaskEmpty">No quick tasks yet.</p>
        <div class="quick-task-list" id="quickTaskList" role="list"></div>
      </section>


          </div>
        </section>
        <section id="recoveryZone" class="momentum-zone" data-zone="recovery">
          <header class="zone-header" data-zone-tab>
            <span class="zone-header__icon" aria-hidden="true">üåô</span>
            <div class="zone-header__text">
              <h2 class="zone-header__title">Recovery Zone</h2>
              <p class="zone-header__subtitle">Resolve conflicts, reset your nervous system, refuel dopamine</p>
            </div>
          </header>
          <div class="zone-body">
            <span id="reset-zone" class="zone-anchor" aria-hidden="true"></span>
      <div class="routine-stack" id="routineTileStack">
        <div class="routine-grid-shell">
          <div class="routine-feature-grid recovery-routines-container">
            <article
              id="morningLaunchModule"
              class="routine-tile"
              data-module-id="morningLaunchModule"
              data-routine-id="morning"
              role="group"
              aria-label="AM Start"
            >
              <div class="routine-tile__surface routine-theme--morning" data-routine-surface>
                <button class="routine-tile__trigger" type="button" aria-expanded="false" role="button" data-routine-trigger>
                  <span class="routine-accent" aria-hidden="true">
                    <span class="routine-accent__icon" data-accent-icon>üåÖ</span>
                  </span>
                  <div class="routine-tile__info">
                    <span class="routine-tile__title" data-routine-title>üåÖ AM Start</span>
                    <span class="routine-tile__prompt" data-routine-prompt>Ready for takeoff? Start your day ritual.</span>
                  </div>
                  <div class="routine-tile__meta">
                    <span class="routine-info-dot" title="Prime your brain for dopamine, cortisol, and clarity with a 60-minute guided ramp into the day." aria-hidden="true">i</span>
                    <span class="routine-reminder" data-routine-reminder></span>
                    <span class="routine-tile__chevron" aria-hidden="true"></span>
                  </div>
                </button>
                <div class="routine-quick-overlay" data-routine-quick-overlay>
                  <div class="routine-quick-overlay__content">
                    <h3 class="routine-quick-overlay__title">AM Start Preview</h3>
                    <ol class="routine-quick-overlay__list" data-quick-preview></ol>
                    <button class="routine-quick-overlay__action" type="button" data-quick-launch>Quick Launch</button>
                  </div>
                </div>
                <div class="routine-tile__body" data-routine-body hidden>
                  <div class="routine-tile__actions">
                    <button class="routine-start-btn start-action" type="button" data-routine-start>Start Routine</button>
                    <div class="routine-quick-actions" role="group" aria-label="AM Start quick actions">
                      <button class="routine-chip" type="button" data-quick-action="refresh">Refresh</button>
                      <button class="routine-chip" type="button" data-quick-action="adjust">Adjust</button>
                      <button class="routine-chip" type="button" data-quick-action="stuck">I'm stuck</button>
                    </div>
                  </div>
                  <div class="routine-tile__content">
                    <div class="module-body" data-routine-content>
                      <div class="module-toggle">
                        <label for="morningLaunchToggle">Enable Morning Launch</label>
                        <input type="checkbox" id="morningLaunchToggle" />
                      </div>
                      <div class="routine-affirmation">No-phone pledge: leave your device in another room overnight and wake up with an analog alarm.</div>
                      <div id="morningLaunchContent" class="hidden" aria-hidden="true">
                        <div class="progress-strip" aria-hidden="true">
                          <span id="morningLaunchProgress"></span>
                        </div>
                        <div id="morningLaunchStatus" class="score"></div>
                        <div class="module-inline-actions">
                          <button id="morningLaunchResetBtn" type="button">Reset morning blocks</button>
                          <button id="morningLaunchSkipBtn" type="button">Skip today</button>
                        </div>
                        <div class="morning-blocks">
                          <article class="routine-block" data-block="move">
                            <h3>MOVE ‚Äî Light Aerobic + Sunlight</h3>
                            <small>Take a brisk walk, 50 jumping jacks, and soak in 5 minutes of direct sunlight.</small>
                            <div class="countdown-display" id="moveCountdown">20:00</div>
                            <div class="module-inline-actions">
                              <button id="moveStartBtn" type="button">Start 20-min timer</button>
                              <button id="moveCompleteBtn" type="button">Mark MOVE complete</button>
                            </div>
                          </article>
                          <article class="routine-block" data-block="reflect">
                            <h3>REFLECT ‚Äî Cold Splash + Intention</h3>
                            <small>Reset with a cold rinse, then name the tone for your day.</small>
                            <div class="intention-buttons">
                              <button type="button" data-intention="Calm &amp; steady">Calm &amp; steady</button>
                              <button type="button" data-intention="Playful &amp; connected">Playful &amp; connected</button>
                              <button type="button" data-intention="Focused craftsmanship">Focused craftsmanship</button>
                            </div>
                            <label for="morningIntention" style="margin:0;">
                              <textarea id="morningIntention" rows="2" placeholder="How do I want today to feel? What would make it meaningful?" style="margin-top:0.35rem;"></textarea>
                            </label>
                            <div class="module-inline-actions">
                              <button id="reflectCompleteBtn" type="button">Save intention</button>
                            </div>
                          </article>
                          <article class="routine-block" data-block="plan">
                            <h3>PLAN ‚Äî Process Anchors</h3>
                            <small>Lock in process-based actions and block time before the day takes over.</small>
                            <textarea id="morningPlanNotes" rows="2" placeholder="Ex: Draft progress notes for 2 patients before noon."></textarea>
                            <div class="module-inline-actions">
                              <button id="planCompleteBtn" type="button">Plan locked in</button>
                            </div>
                          </article>
                        </div>
                        <div class="energy-rating">
                          <label for="morningEnergy" style="margin:0;">Energy check-in</label>
                          <input id="morningEnergy" data-field="energy-level" type="range" min="1" max="5" step="1" value="3" />
                          <span id="morningEnergyLabel">--</span>
                          <button id="morningEnergySave" type="button">Log energy</button>
                        </div>
                        <div class="morning-chart-wrapper">
                          <canvas
                            id="morningLaunchChart"
                            class="chart-canvas"
                            width="360"
                            height="160"
                            role="img"
                            aria-label="Line chart of morning launch completion and energy trends"
                          ></canvas>
                          <div class="chart-legend" aria-hidden="true">
                            <span><span class="legend-swatch completion"></span>Ready progress</span>
                            <span><span class="legend-swatch energy"></span>Energy (1‚Äì5 scaled)</span>
                          </div>
                          <div id="morningLaunchChartSummary" class="module-note"></div>
                        </div>
                        <ul id="morningLaunchHistory" class="history-list" aria-live="polite"></ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </article>

            <article
              id="launchPadModule"
              class="routine-tile"
              data-module-id="launchPadModule"
              data-routine-id="environment"
              role="group"
              aria-label="Launch Pad"
            >
              <div class="routine-tile__surface routine-theme--environment" data-routine-surface>
                <button class="routine-tile__trigger" type="button" aria-expanded="false" role="button" data-routine-trigger>
                  <span class="routine-accent" aria-hidden="true">
                    <span class="routine-accent__icon" data-accent-icon>üöÄ</span>
                  </span>
                  <div class="routine-tile__info">
                    <span class="routine-tile__title" data-routine-title>üöÄ Launch Pad</span>
                    <span class="routine-tile__prompt" data-routine-prompt>Tap to reset your surroundings.</span>
                  </div>
                  <div class="routine-tile__meta">
                    <span class="routine-info-dot" title="Curate a nightly launch pad so tomorrow starts calm, stocked, and on time." aria-hidden="true">i</span>
                    <span class="routine-reminder" data-routine-reminder></span>
                    <span class="routine-tile__chevron" aria-hidden="true"></span>
                  </div>
                </button>
                <div class="routine-quick-overlay" data-routine-quick-overlay>
                  <div class="routine-quick-overlay__content">
                    <h3 class="routine-quick-overlay__title">Launch Pad Preview</h3>
                    <ol class="routine-quick-overlay__list" data-quick-preview></ol>
                    <button class="routine-quick-overlay__action" type="button" data-quick-launch>Quick Launch</button>
                  </div>
                </div>
                <div class="routine-tile__body" data-routine-body hidden>
                  <div class="routine-tile__actions">
                    <button class="routine-start-btn start-action" type="button" data-routine-start>Start Routine</button>
                    <div class="routine-quick-actions" role="group" aria-label="Launch Pad quick actions">
                      <button class="routine-chip" type="button" data-quick-action="refresh">Refresh</button>
                      <button class="routine-chip" type="button" data-quick-action="adjust">Adjust</button>
                      <button class="routine-chip" type="button" data-quick-action="stuck">I'm stuck</button>
                    </div>
                  </div>
                  <div class="routine-tile__content">
                    <div class="module-body" data-routine-content>
                      <div class="module-toggle">
                        <label for="launchPadReminderTime">Reminder time</label>
                        <input type="time" id="launchPadReminderTime" />
                      </div>
                      <div class="launch-pad-summary" id="launchPadSummary"></div>
                      <div class="module-inline-actions">
                        <button id="openLaunchPadModal" type="button">Evening checklist</button>
                        <button id="launchPadMorningReview" type="button">Morning review</button>
                      </div>
                      <div class="launch-pad-settings">
                        <label for="launchPadSiteSelect">Clinic / environment
                          <select id="launchPadSiteSelect"></select>
                        </label>
                        <div class="module-inline-actions">
                          <input type="text" id="launchPadNewItem" placeholder="Add launch pad item" />
                          <button id="launchPadAddItem" type="button">Add Item</button>
                          <button id="launchPadLoadPreset" type="button">Reset to preset</button>
                        </div>
                        <div id="launchPadItemList" class="launch-pad-list" aria-live="polite"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </article>

            <article
              id="sleepToolkitModule"
              class="routine-tile"
              data-module-id="sleepToolkitModule"
              data-routine-id="sleep"
              role="group"
              aria-label="Sleep Toolkit"
            >
              <div class="routine-tile__surface routine-theme--sleep" data-routine-surface>
                <button class="routine-tile__trigger" type="button" aria-expanded="false" role="button" data-routine-trigger>
                  <span class="routine-accent" aria-hidden="true">
                    <span class="routine-accent__icon" data-accent-icon>üò¥</span>
                  </span>
                  <div class="routine-tile__info">
                    <span class="routine-tile__title" data-routine-title>üò¥ Sleep Toolkit</span>
                    <span class="routine-tile__prompt" data-routine-prompt>Wind down mode is ready.</span>
                  </div>
                  <div class="routine-tile__meta">
                    <span class="routine-info-dot" title="Stabilize melatonin and cortisol rhythms with gentle wind-down and light cues." aria-hidden="true">i</span>
                    <span class="routine-reminder" data-routine-reminder></span>
                    <span class="routine-tile__chevron" aria-hidden="true"></span>
                  </div>
                </button>
                <div class="routine-quick-overlay" data-routine-quick-overlay>
                  <div class="routine-quick-overlay__content">
                    <h3 class="routine-quick-overlay__title">Sleep Toolkit Preview</h3>
                    <ol class="routine-quick-overlay__list" data-quick-preview></ol>
                    <button class="routine-quick-overlay__action" type="button" data-quick-launch>Quick Launch</button>
                  </div>
                </div>
                <div class="routine-tile__body" data-routine-body hidden>
                  <div class="routine-tile__actions">
                    <button class="routine-start-btn start-action" type="button" data-routine-start>Start Routine</button>
                    <div class="routine-quick-actions" role="group" aria-label="Sleep Toolkit quick actions">
                      <button class="routine-chip" type="button" data-quick-action="refresh">Refresh</button>
                      <button class="routine-chip" type="button" data-quick-action="adjust">Adjust</button>
                      <button class="routine-chip" type="button" data-quick-action="stuck">I'm stuck</button>
                    </div>
                  </div>
                  <div class="routine-tile__content">
                    <div class="module-body" data-routine-content>
                      <div class="module-toggle">
                        <label for="sleepToolkitToggle">Enable toolkit</label>
                        <input type="checkbox" id="sleepToolkitToggle" />
                      </div>
                      <div id="sleepToolkitContent" class="hidden" aria-hidden="true">
                        <div class="sleep-checklist" id="sleepChecklist"></div>
                        <div id="sleepCompletionSummary" class="sleep-summary"></div>
                        <div id="sleepMorningRating" class="energy-rating"></div>
                        <div id="sleepCorrelationSummary" class="sleep-summary"></div>
                        <div class="sleep-tips" id="sleepTips"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </article>

            <article
              id="dopamineModule"
              class="routine-tile"
              data-module-id="dopamineModule"
              data-routine-id="dopamine"
              role="group"
              aria-label="Dopa-Me"
            >
              <div class="routine-tile__surface routine-theme--dopamine" data-routine-surface>
                <button class="routine-tile__trigger" type="button" aria-expanded="false" role="button" data-routine-trigger>
                  <span class="routine-accent" aria-hidden="true">
                    <span class="routine-accent__icon" data-accent-icon>üéµ</span>
                  </span>
                  <div class="routine-tile__info">
                    <span class="routine-tile__title" data-routine-title>üéµ Dopa-Me</span>
                    <span class="routine-tile__prompt" data-routine-prompt>Train focus with a 5-min win.</span>
                  </div>
                  <div class="routine-tile__meta">
                    <span class="routine-info-dot" title="Stretch reward intervals with a playlist of micro-celebrations." aria-hidden="true">i</span>
                    <span class="routine-reminder" data-routine-reminder></span>
                    <span class="routine-tile__chevron" aria-hidden="true"></span>
                  </div>
                </button>
                <div class="routine-quick-overlay" data-routine-quick-overlay>
                  <div class="routine-quick-overlay__content">
                    <h3 class="routine-quick-overlay__title">Dopa-Me Preview</h3>
                    <ol class="routine-quick-overlay__list" data-quick-preview></ol>
                    <button class="routine-quick-overlay__action" type="button" data-quick-launch>Quick Launch</button>
                  </div>
                </div>
                <div class="routine-tile__body" data-routine-body hidden>
                  <div class="routine-tile__actions">
                    <button class="routine-start-btn start-action" type="button" data-routine-start>Start Routine</button>
                    <div class="routine-quick-actions" role="group" aria-label="Dopa-Me quick actions">
                      <button class="routine-chip" type="button" data-quick-action="refresh">Refresh</button>
                      <button class="routine-chip" type="button" data-quick-action="adjust">Adjust</button>
                      <button class="routine-chip" type="button" data-quick-action="stuck">I'm stuck</button>
                    </div>
                  </div>
                  <div class="routine-tile__content">
                    <div class="module-body" data-routine-content>
                      <div class="dopamine-playlist">
                        <label for="dopamineReward">Reward style
                          <select id="dopamineReward">
                            <option value="music">Music stinger</option>
                            <option value="confetti">GIF confetti</option>
                            <option value="coin">Coin sound</option>
                            <option value="stretch">Stretch cue</option>
                          </select>
                        </label>
                        <div class="dopamine-intervals" id="dopamineIntervals" aria-live="polite"></div>
                        <div class="dopamine-progress" aria-hidden="true">
                          <span id="dopamineProgressFill"></span>
                        </div>
                        <div class="conflict-actions">
                          <button id="dopamineStart" type="button" class="btn btn-primary">Start playlist</button>
                          <button id="dopamineStop" type="button" class="btn btn-ghost" disabled>Stop</button>
                        </div>
                        <div id="dopamineStatus" class="score" aria-live="polite"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </div>

      </div>
      <div id="routineEditSheet" class="routine-sheet" role="dialog" aria-modal="true" aria-labelledby="routineEditTitle">
        <div class="routine-sheet__scrim" data-routine-sheet-dismiss></div>
        <div class="routine-sheet__panel" role="document">
          <h3 id="routineEditTitle" class="routine-sheet__title">Edit routine</h3>
          <div class="routine-sheet__field">
            <label for="routineNameInput">Routine name</label>
            <input id="routineNameInput" type="text" autocomplete="off" />
          </div>
          <div class="routine-sheet__field">
            <label for="routineStepsInput">Steps (one per line)</label>
            <textarea id="routineStepsInput" rows="4"></textarea>
          </div>
          <div class="routine-sheet__field">
            <label for="routineQuickSelect">Default quick launch</label>
            <select id="routineQuickSelect"></select>
          </div>
          <div class="routine-sheet__field">
            <label for="routineReminderTime">Reminder time</label>
            <input id="routineReminderTime" type="time" />
          </div>
          <div class="routine-sheet__field">
            <label class="routine-preferences__toggle" for="routineHapticsInSheet">
              <input type="checkbox" id="routineHapticsInSheet" />
              <span class="routine-preferences__label">Enable haptic nudges</span>
            </label>
          </div>
          <div class="routine-sheet__actions">
            <button type="button" class="routine-sheet__cancel" data-routine-sheet-cancel>Cancel</button>
            <button type="button" class="routine-sheet__save" data-routine-sheet-save>Save</button>
          </div>
        </div>
      </div>
      </div>
    </div>
  </section>
      </div>

  <div
    id="templatesOverlay"
    class="modal-overlay hidden templates-overlay"
    role="dialog"
    aria-modal="true"
    aria-hidden="true"
    aria-labelledby="templatesOverlayTitle"
  >
    <div class="modal-card templates-card" role="document">
      <div class="modal-card__header">
        <h3 id="templatesOverlayTitle">üß© Templates</h3>
        <button id="templatesOverlayClose" class="modal__close" type="button" aria-label="Close templates">‚úï</button>
      </div>
      <div class="templates-overlay__body">
        <div class="template-module__actions">
          <button id="blockBatchOpen" class="btn btn-secondary" type="button">Block Batch</button>
        </div>
        <div id="templateButtons"></div>
      </div>
    </div>
  </div>

  <div
    id="conflictOverlay"
    class="modal-overlay hidden conflict-overlay"
    role="dialog"
    aria-modal="true"
    aria-hidden="true"
    aria-labelledby="conflictOverlayTitle"
  >
    <div class="modal-card conflict-card" role="document">
      <div class="modal-card__header">
        <h3 id="conflictOverlayTitle">ü•ä 3-v-3 Conflict Resolver</h3>
        <button id="conflictOverlayClose" class="modal__close" type="button" aria-label="Close conflict resolver">‚úï</button>
      </div>
      <div class="conflict-overlay__body" id="conflictResolverModule">
        <div class="conflict-grid">
          <div class="conflict-column">
            <h3>Top 3 should-do</h3>
            <div id="conflictShouldList" class="conflict-list" aria-live="polite"></div>
          </div>
          <div class="conflict-column">
            <h3>Top 3 want-to</h3>
            <div id="conflictWantList" class="conflict-list" aria-live="polite"></div>
          </div>
        </div>
        <div
          id="conflictArena"
          class="conflict-arena"
          role="application"
          aria-live="polite"
          aria-label="Drag contenders here"
        >
          <div id="conflictArenaPrompt">Drag a contender from each side into the arena.</div>
        </div>
        <div class="conflict-actions">
          <button id="conflictReset" type="button" class="btn btn-ghost">Reset arena</button>
        </div>
        <div id="conflictResult" class="score" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <div id="template-modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="templateModalTitle">
    <div class="modal__content">
      <div class="modal__head"><strong id="templateModalTitle">Choose a template</strong><button class="modal__close" type="button">‚úï</button></div>
      <div class="template-grid" id="template-grid"></div>
    </div>
  </div>

  <div
    id="block-batch-modal"
    class="modal hidden"
    role="dialog"
    aria-modal="true"
    aria-hidden="true"
    aria-labelledby="blockBatchModalTitle"
  >
    <div class="modal__content">
      <div class="modal__head">
        <strong id="blockBatchModalTitle">Block Batch Menu</strong>
        <button class="modal__close" type="button">‚úï</button>
      </div>
      <div class="block-batch-layout">
        <div class="block-batch-list" id="blockBatchList" role="listbox" aria-label="Batch types"></div>
        <div>
          <div class="block-batch-counts" id="blockBatchCounts"></div>
          <div id="blockBatchEditor" class="block-batch-editor hidden" aria-live="polite">
            <div class="block-batch-editor__head">
              <h3 id="blockBatchEditorTitle">Edit default profile</h3>
              <button type="button" class="link-button" id="blockBatchEditorClose">Done</button>
            </div>
            <div class="block-batch-editor__grid">
              <label for="blockBatchCategory">Category
                <select id="blockBatchCategory">
                  <option value="General">General</option>
                  <option value="Admin">Admin</option>
                  <option value="Chart">Chart</option>
                  <option value="Inbox">Inbox</option>
                  <option value="Calls">Calls</option>
                  <option value="Teaching">Teaching</option>
                  <option value="Personal">Personal</option>
                </select>
              </label>
              <label for="blockBatchAuthor">Chart Author
                <select id="blockBatchAuthor">
                  <option value="attending">Attending</option>
                  <option value="resident">Resident</option>
                </select>
              </label>
              <label for="blockBatchPatient">Patient Type
                <select id="blockBatchPatient">
                  <option value="Non-Complex">Non-Complex</option>
                  <option value="Complex">Complex</option>
                </select>
              </label>
              <label for="blockBatchVisit">Visit Type
                <select id="blockBatchVisit">
                  <option value="Follow-Up">Follow-Up</option>
                  <option value="Establish Care">Establish Care</option>
                  <option value="Well Child Visit">Well Child Visit</option>
                  <option value="Acute Visit">Acute Visit</option>
                </select>
              </label>
              <label for="blockBatchClinic">Clinic Site
                <select id="blockBatchClinic">
                  <option value="General Clinic">General Clinic</option>
                  <option value="St PJ‚Äôs Shelter">St PJ‚Äôs Shelter</option>
                  <option value="Craniofacial Clinic">Craniofacial Clinic</option>
                </select>
              </label>
              <label for="blockBatchImportance">Importance (1‚Äì5)
                <select id="blockBatchImportance">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
              <label for="blockBatchUrgency">Urgency (1‚Äì5)
                <select id="blockBatchUrgency">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
              <label for="blockBatchNovelty">Novelty (1‚Äì5)
                <select id="blockBatchNovelty">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
              <label for="blockBatchInterest">Interest (1‚Äì5)
                <select id="blockBatchInterest">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
              <label for="blockBatchExternalPressure">External Pressure (1‚Äì5)
                <select id="blockBatchExternalPressure">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
              <label for="blockBatchTimeToStart">Time to Start (1‚Äì5)
                <select id="blockBatchTimeToStart">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
              <label for="blockBatchDifficulty">Difficulty (1‚Äì5)
                <select id="blockBatchDifficulty">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
            </div>
            <label for="blockBatchSubtasks">Default subtasks
              <textarea id="blockBatchSubtasks" placeholder="One subtask per line"></textarea>
            </label>
            <label class="sound-toggle" for="blockBatchUseChartTemplate">
              <input type="checkbox" id="blockBatchUseChartTemplate" /> Use chart smart defaults
            </label>
            <div class="block-batch-editor__actions">
              <button id="blockBatchResetProfile" type="button" class="btn btn-ghost">Reset to default</button>
              <button id="blockBatchSaveProfile" type="button" class="btn btn-primary">Save profile</button>
            </div>
          </div>
        </div>
      </div>
      <div class="block-batch-footer">
        <label for="blockBatchDate">Service date
          <input type="date" id="blockBatchDate" />
        </label>
        <button id="blockBatchAdd" class="btn btn-primary" type="button">Add</button>
      </div>
    </div>
  </div>

  <div id="firstThreeWizard" class="wizard-overlay hidden" aria-hidden="true">
    <div class="wizard-content" role="dialog" aria-modal="true" aria-labelledby="firstThreeTitle">
      <h3 id="firstThreeTitle">ü™ú First-Three-Steps Wizard</h3>
      <p>Break the project into tiny, guaranteed-win actions to get moving.</p>
      <div class="wizard-steps">
        <label>Step 1
          <input type="text" id="firstThreeStep1" placeholder="Open patient chart" />
        </label>
        <label>Step 2
          <input type="text" id="firstThreeStep2" placeholder="Skim last visit notes" />
        </label>
        <label>Step 3
          <input type="text" id="firstThreeStep3" placeholder="Draft first paragraph" />
        </label>
      </div>
      <div class="wizard-actions">
        <button id="firstThreeSkip" type="button">Skip for this task</button>
        <button id="firstThreeCancel" type="button">Cancel</button>
        <button id="firstThreeSave" type="button">Save steps</button>
      </div>
    </div>
  </div>

  <div id="launchPadModal" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="launchPadModalTitle">
      <h3 id="launchPadModalTitle">üöÄ Prep Tomorrow's Launch Pad</h3>
      <p>Gather items tonight so future-you can walk out the door calm.</p>
      <div id="launchPadModalList" class="sleep-checklist" aria-live="polite"></div>
      <div class="modal-actions">
        <button id="launchPadModalClose" type="button">Done</button>
      </div>
    </div>
  </div>

  <div id="quickCaptureOverlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="quickCaptureTitle">
      <h3 id="quickCaptureTitle">‚úçÔ∏è Quick capture</h3>
      <label for="quickCaptureInput">Task name
        <input id="quickCaptureInput" type="text" placeholder="What's the very next action?" />
      </label>
      <div class="modal-actions">
        <button id="quickCaptureCancel" type="button" class="btn btn-ghost">Cancel</button>
        <button id="quickCaptureSave" type="button" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>

  <div id="addTaskOverlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal-card modal-card--wide" role="dialog" aria-modal="true" aria-labelledby="addTaskTitle">
      <button id="addTaskClose" class="modal__close" type="button" aria-label="Close task builder">‚úï</button>
      <h3 id="addTaskTitle">Add task</h3>
      <div class="card-body" id="addTaskCardBody" aria-hidden="false">
        <div class="task-form-group">
          <span class="task-form-group__label">New task</span>
          <p id="quickTaskTemplateHint" class="quick-task-hint hidden">Quick task mode: name it and tap Add.</p>
          <label for="name">Task name
            <input id="name" type="text" placeholder="3/14 ‚Äì J.M. ‚Äì Complex Care Follow-Up (Resident)" />
          </label>
          <label for="taskCategory">Category
            <select id="taskCategory">
              <option value="General" selected>General</option>
              <option value="Admin">Admin</option>
              <option value="Chart">Chart</option>
              <option value="Inbox">Inbox</option>
              <option value="Calls">Calls</option>
              <option value="Teaching">Teaching</option>
              <option value="Personal">Personal</option>
              <option value="Quick Task">Quick Task</option>
            </select>
          </label>
          <div class="task-inline-actions" aria-label="Task helpers">
            <button type="button" class="link-button" id="btn-use-template">Use template</button>
            <button type="button" class="link-button" id="btn-save-template">Add as template</button>
            <button
              type="button"
              class="link-button"
              id="expandTaskDetailsButton"
              aria-controls="taskDetails"
              aria-expanded="false"
            >
              Show details
            </button>
          </div>
          <div id="taskDetails" class="task-details-panel" data-collapsed="true">
            <div id="chartFields" class="chart-fields is-hidden" aria-hidden="true">
              <label for="authorType">Chart Author
                <select id="authorType">
                  <option value="attending" selected>Attending</option>
                  <option value="resident">Resident</option>
                </select>
              </label>
              <label for="patientType" title="Complex = medically fragile, multi-specialty, or DME-dependent.">Patient Type
                <select id="patientType">
                  <option value="Non-Complex" selected>Non-Complex</option>
                  <option value="Complex">Complex</option>
                </select>
              </label>
              <label for="visitType" title="Determines estimated chart complexity and time to complete.">Visit Type
                <select id="visitType">
                  <option value="Follow-Up" selected>Follow-Up</option>
                  <option value="Establish Care">Establish Care</option>
                  <option value="Well Child Visit">Well Child Visit</option>
                  <option value="Acute Visit">Acute Visit</option>
                </select>
              </label>
              <label for="clinicSite" title="Same-day notes from St PJ‚Äôs or Craniofacial automatically rise to the top.">Clinic Site
                <select id="clinicSite">
                  <option value="General Clinic" selected>General Clinic</option>
                  <option value="St PJ‚Äôs Shelter">St PJ‚Äôs Shelter</option>
                  <option value="Craniofacial Clinic">Craniofacial Clinic</option>
                </select>
              </label>
              <label for="dateOfService" title="Select the date of the encounter; defaults to today.">Date of Service
                <input type="date" id="dateOfService" />
              </label>
              <small id="chartAgeDisplay" class="chart-age"></small>
            </div>
            <label for="importance">Importance (1‚Äì5) <select id="importance"></select></label>
            <label for="urgency">Urgency (1‚Äì5)
              <select id="urgency"></select>
            </label>
            <small id="urgencyHint" class="urgency-hint"></small>
            <label for="novelty">Novelty (1‚Äì5) <select id="novelty"></select></label>
            <label for="interest">Interest (1‚Äì5) <select id="interest"></select></label>
            <label for="externalPressure">External Pressure (1‚Äì5)
              <select id="externalPressure"></select>
            </label>
            <label for="timeToStart">Time to Start (1‚Äì5) <select id="timeToStart"></select></label>
            <label for="difficulty">Difficulty (1‚Äì5) <select id="difficulty"></select></label>
            <label for="dueDate" title="Optional specific target date; used for personal scheduling.">Due Date (Optional)
              <input type="date" id="dueDate" />
            </label>
            <label for="initialSubTasks">Subtasks
              <textarea id="initialSubTasks" rows="3" placeholder="One subtask per line."></textarea>
            </label>
            <label class="sound-toggle" for="focusSoundToggle">
              <input type="checkbox" id="focusSoundToggle" checked />
              Enable focus mode ping
            </label>
          </div>
        </div>
      </div>
      <div class="card-sticky-actions" aria-hidden="false">
        <div class="card-sticky-actions__primary">
          <button id="addTaskBtn" class="btn btn-primary" type="button" onclick="addTask()">Add Task</button>
          <button id="saveUpdateBtn" class="btn btn-primary hidden" type="button" onclick="saveTaskUpdate()">Save Update</button>
          <button id="cancelEditBtn" class="btn btn-ghost hidden" type="button" onclick="cancelEdit()">Cancel</button>
        </div>
        <div class="card-sticky-actions__secondary">
          <button type="button" class="btn btn-secondary" onclick="startFiveMinuteSprint()" id="startBtn" disabled>Start 5-min</button>
          <button type="button" class="btn btn-ghost" onclick="reset()">Reset</button>
        </div>
      </div>
    </div>
  </div>

  <div id="focusLaunchBackdrop" class="focus-sheet__backdrop" hidden></div>
  <section
    id="focusLaunchSheet"
    class="focus-sheet"
    role="dialog"
    aria-modal="true"
    aria-hidden="true"
    aria-labelledby="focusLaunchTitle"
  >
    <button id="focusLaunchHandle" class="focus-sheet__handle" type="button" aria-label="Close focus launcher"></button>
    <div class="focus-sheet__content">
      <header class="focus-sheet__header">
        <h2 id="focusLaunchTitle">Start Focus</h2>
        <p class="focus-sheet__preview">
          Next suggested: <span id="focusSuggestionText">Add a task to unlock focus.</span>
        </p>
      </header>
      <div class="focus-sheet__options">
        <button
          type="button"
          class="focus-sheet__option focus-sheet__option--primary start-action"
          data-focus-mode="sprint"
        >
          5-min Sprint
        </button>
        <button type="button" class="focus-sheet__option" data-focus-mode="session">Full Session</button>
        <button
          type="button"
          id="focusSuggestionButton"
          class="focus-sheet__option focus-sheet__option--suggestion"
          data-focus-mode="suggestion"
          disabled
          aria-disabled="true"
        >
          <span class="focus-sheet__option-label">Next Suggested Task</span>
          <span id="focusSuggestionDetail" class="focus-sheet__option-detail">Add a task to unlock focus.</span>
        </button>
      <div id="routineEditSheet" class="routine-sheet" role="dialog" aria-modal="true" aria-labelledby="routineEditTitle">
        <div class="routine-sheet__scrim" data-routine-sheet-dismiss></div>
        <div class="routine-sheet__panel" role="document">
          <h3 id="routineEditTitle" class="routine-sheet__title">Edit routine</h3>
          <div class="routine-sheet__field">
            <label for="routineNameInput">Routine name</label>
            <input id="routineNameInput" type="text" autocomplete="off" />
          </div>
          <div class="routine-sheet__field">
            <label for="routineStepsInput">Steps (one per line)</label>
            <textarea id="routineStepsInput" rows="4"></textarea>
          </div>
          <div class="routine-sheet__field">
            <label for="routineQuickSelect">Default quick launch</label>
            <select id="routineQuickSelect"></select>
          </div>
          <div class="routine-sheet__field">
            <label for="routineReminderTime">Reminder time</label>
            <input id="routineReminderTime" type="time" />
          </div>
          <div class="routine-sheet__field">
            <label class="routine-preferences__toggle" for="routineHapticsInSheet">
              <input type="checkbox" id="routineHapticsInSheet" />
              <span class="routine-preferences__label">Enable haptic nudges</span>
            </label>
          </div>
          <div class="routine-sheet__actions">
            <button type="button" class="routine-sheet__cancel" data-routine-sheet-cancel>Cancel</button>
            <button type="button" class="routine-sheet__save" data-routine-sheet-save>Save</button>
          </div>
        </div>
      </div>
      </div>
    </div>
  </section>

  <div id="resourcesBackdrop" class="drawer-backdrop" hidden></div>
  <aside
    id="resourcesDrawer"
    class="resources-drawer"
    aria-hidden="true"
    aria-labelledby="resourcesTitle"
    tabindex="-1"
  >
    <header class="resources-drawer__header">
      <h2 id="resourcesTitle">Quick Access Partners</h2>
      <button id="resourcesClose" class="resources-drawer__close" type="button" aria-label="Close resources">‚úï</button>
    </header>
    <div class="resources-drawer__body">
      <a
        class="resource-button resource-button--planning"
        href="https://chatgpt.com/g/g-p-68feee841e7081919a28fe9b3083e9f0-karl/project"
        target="_blank"
        rel="noopener noreferrer"
      >
        <small>planning ally</small>
        <strong>Chat with Karl</strong>
        <span>ADHD-tailored task partner ready to map out your day.</span>
      </a>
      <a
        class="resource-button resource-button--strategies"
        href="https://chatgpt.com/g/g-p-6836a5682d0481918484506cbc1f3082-epic-companion/project"
        target="_blank"
        rel="noopener noreferrer"
      >
        <small>strategies</small>
        <strong>EPIC Companion</strong>
        <span>Brainstorm workflows to move faster inside the EHR.</span>
      </a>
      <a
        class="resource-button resource-button--digest"
        href="https://notebooklm.google.com/"
        target="_blank"
        rel="noopener noreferrer"
      >
        <small>digest</small>
        <strong>NotebookLM</strong>
        <span>Summarize research and notes in a focused workspace.</span>
      </a>
      <a
        class="resource-button resource-button--vault"
        href="https://www.notion.so/Assessments-and-Plans-28131b26f81f803088bad074ee0e00fb?source=copy_link"
        target="_blank"
        rel="noopener noreferrer"
      >
        <small>vault</small>
        <strong>Assessments &amp; Plans</strong>
        <span>Review ready-made assessment and plan examples.</span>
      </a>
      <a
        class="resource-button resource-button--vault"
        href="https://chatgpt.com/g/g-p-68feff1f73ac819189dcf556e573c912-assessments-plans/project"
        target="_blank"
        rel="noopener noreferrer"
      >
        <small>document builder</small>
        <strong>Create Assessments &amp; Plans</strong>
        <span>Draft new assessments from your history and physical notes.</span>
      </a>
    </div>
  </aside>

  <div
    id="sosOverlay"
    class="sos-overlay hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="sosOverlayTitle"
  >
    <div class="sos-card">
      <header class="sos-card__header">
        <h2 id="sosOverlayTitle">Crisis Support</h2>
        <button id="sosOverlayClose" class="sos-card__close" type="button" aria-label="Close crisis support">‚úï</button>
      </header>
      <div class="sos-card__actions">
        <div class="sos-card__action-group">
          <button id="worstDayButton" class="sos-card__action start-action" type="button">üòµ‚Äçüí´ Worst-Day Mode</button>
          <p id="worstDayHint" class="sos-card__detail"></p>
        </div>
        <button id="sosDefuse" class="sos-card__action" type="button">üßò DEFUSE Mode</button>
        <button id="sosConflict" class="sos-card__action" type="button">ü•ä 3-v-3 Conflict Resolver</button>
        <button id="sosShield" class="sos-card__action" type="button">üõ°Ô∏è Meltdown Shield</button>
      </div>
      <p class="sos-card__hint">Need a reset? These stay ready until you close them.</p>
    </div>
  </div>

  <!-- Focus mode -->
  <div id="ganttSnapshotOverlay" class="modal-overlay hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="ganttSnapshotTitle">
    <div class="gantt-card">
      <div class="gantt-card__header">
        <h3 id="ganttSnapshotTitle">‚è≥ Next 3-hour snapshot</h3>
        <button id="ganttCloseButton" class="modal__close" type="button" aria-label="Close snapshot">‚úï</button>
      </div>
      <p class="gantt-intro">Blocks sized by estimated minutes so you can see what will actually fit.</p>
      <div class="gantt-blocks-wrapper">
        <div id="ganttProgressBar" class="gantt-progress"></div>
        <div id="ganttBlocks" class="gantt-blocks" role="list"></div>
      </div>
      <div id="ganttStatus" class="gantt-status"></div>
    </div>
  </div>

  <div id="worstDayOverlay" class="modal-overlay hidden worst-day-overlay" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="worstDayHeading">
    <div class="worst-day-card">
      <button id="worstDayClose" class="modal__close" type="button" aria-label="Close Worst-Day mode">‚úï</button>
      <h3 id="worstDayHeading">üòµ‚Äçüí´ Worst-Day Mode</h3>
      <p class="worst-day-subheading">One soft five-minute pass on your most meaningful project.</p>
      <div class="worst-day-focus-line">
        <span class="worst-day-label">Focus</span>
        <strong id="worstDayFocus"></strong>
      </div>
      <div id="worstDayTimer" class="worst-day-timer">05:00</div>
      <p id="worstDayPrompt" class="worst-day-prompt">Move gently. Drift happens ‚Äî we'll reset together.</p>
      <div id="worstDayActions" class="worst-day-actions hidden">
        <p class="worst-day-complete">Sprint complete! Pick your next micro-reward.</p>
        <div class="worst-day-celebrations" role="group" aria-label="Worst-Day celebration choices">
          <button type="button" data-worst-day-choice="laugh">üòÇ Laugh</button>
          <button type="button" data-worst-day-choice="stretch">üôÜ Stretch</button>
          <button type="button" data-worst-day-choice="stop">üõë Stop proudly</button>
        </div>
        <div id="worstDayCelebration" class="worst-day-celebration" aria-live="polite"></div>
      </div>
      <button id="worstDayExit" class="link-button" type="button">Leave Worst-Day Mode</button>
    </div>
  </div>

  <div
    id="defuseOverlay"
    class="modal-overlay hidden defuse-overlay"
    role="dialog"
    aria-modal="true"
    aria-hidden="true"
    aria-labelledby="defuseOverlayTitle"
  >
    <div class="defuse-modal">
      <header class="defuse-modal__header">
        <h3 id="defuseOverlayTitle">üßò DEFUSE Mode</h3>
        <button id="defuseClose" class="defuse-modal__close" type="button" aria-label="Close DEFUSE mode">‚úï</button>
      </header>
      <div id="defuseModule" class="defuse-modal__body" data-module-id="defuseModule">
        <div class="defuse-grid">
          <div class="defuse-steps">
            <strong>Preflight (90s)</strong>
            <div id="defusePrompt">Feeling ‚â† instruction. You can feel tired and still send the email.</div>
            <div class="defuse-progress" aria-hidden="true">
              <span id="defuseProgressFill"></span>
            </div>
            <div class="score">Countdown: <span id="defuseCountdown">90s</span></div>
          </div>
          <div>
            <strong>Fake it action</strong>
            <div class="intention-buttons">
              <button type="button" data-defuse-action="Open the doc & type the title">Open doc + type title</button>
              <button type="button" data-defuse-action="Write one bullet in the note">Draft one bullet</button>
              <button type="button" data-defuse-action="Send the 2-sentence update">Send the 2-sentence update</button>
            </div>
            <p id="defuseActionPreview" class="score">Action picked: Open the doc & type the title</p>
          </div>
          <div>
            <strong>Zone locks</strong>
            <div id="defuseLocks" class="defuse-locks">
              <label><input type="checkbox" value="Messages" /> Messages</label>
              <label><input type="checkbox" value="Email" /> Email</label>
              <label><input type="checkbox" value="Instagram" /> Instagram</label>
              <label><input type="checkbox" value="YouTube" /> YouTube</label>
            </div>
          </div>
          <div>
            <strong>Uptime sprint</strong>
            <p id="defuseUptime" class="score">Next sprint: 10 minutes</p>
            <div class="defuse-progress" aria-hidden="true">
              <span id="defuseUptimeFill"></span>
            </div>
          </div>
          <div class="conflict-actions">
            <button id="defuseStart" type="button" class="btn btn-primary">Start DEFUSE</button>
            <button id="defuseCancel" type="button" class="btn btn-ghost" disabled>Cancel</button>
          </div>
          <div id="defuseStatus" class="score" aria-live="polite"></div>
        </div>
      </div>
    </div>
  </div>

  <section id="focus" class="focus-overlay hidden" aria-hidden="true">
    <div class="focus-overlay__backdrop" data-focus-dismiss></div>
    <div class="focus-overlay__sheet" role="dialog" aria-modal="true" aria-labelledby="focusTimer" tabindex="-1">
      <header class="focus-overlay__header">
        <div id="focusTimer" aria-live="polite">üß≠ Focus Time: 0:00</div>
        <div class="focus-overlay__progress" aria-hidden="true">
          <span id="focusProgressFill" class="focus-overlay__progress-fill"></span>
        </div>
      </header>
      <div class="focus-overlay__body">
        <div class="focus-overlay__summary" id="focusTaskSummary">
          <div class="focus" tabindex="0" aria-live="polite"></div>
          <div class="score task-counter" id="scoreView"></div>
        </div>
        <div id="focusFitHint" class="focus-overlay__hint" aria-live="polite"></div>
        <div id="subTaskView"></div>
        <div id="distractionTools" class="distraction-tools">
          <div class="distraction-tools__header">
            <strong>Distraction cheat sheet</strong>
            <button id="caughtMeButton" type="button" disabled aria-disabled="true">‚ÄúCaught me‚Äù</button>
          </div>
          <div id="distractionPrompt" class="distraction-prompt hidden">
            <span>What pulled you off course?</span>
            <div class="distraction-options" role="group" aria-label="Distraction triggers">
              <button type="button" data-distraction-trigger="tab">Tab hop</button>
              <button type="button" data-distraction-trigger="ping">Notification ping</button>
              <button type="button" data-distraction-trigger="thought">Thought spiral</button>
            </div>
          </div>
          <ul id="distractionLog" class="distraction-log" aria-live="polite" aria-label="Logged distractions"></ul>
          <div id="doorwayReset" class="doorway-reset hidden" aria-live="polite">
            <p id="doorwayResetMessage"></p>
            <div class="doorway-reset-actions">
              <button id="doorwayStartButton" type="button">Start 60-second reset</button>
              <button id="doorwaySkipButton" type="button" class="link-button">Not now</button>
            </div>
            <div id="doorwayCountdown" class="doorway-countdown hidden"></div>
          </div>
        </div>
      </div>
      <footer class="focus-overlay__actions">
        <button id="focusExtendButton" type="button" class="btn btn-secondary">Add 5 more min</button>
        <button id="focusAbortButton" type="button" class="btn btn-ghost">Abort</button>
        <button id="focusCompleteButton" type="button" class="btn hero-cta">Task complete</button>
      </footer>
    </div>
  </section>

  <section
    id="allTasksOverlay"
    class="all-tasks-overlay hidden"
    aria-hidden="true"
    data-all-tasks-screen
  >
    <div class="all-tasks-overlay__backdrop" data-all-tasks-dismiss></div>
    <div
      class="all-tasks-overlay__sheet"
      role="dialog"
      aria-modal="true"
      aria-labelledby="allTasksOverlayTitle"
      tabindex="-1"
    >
      <button type="button" class="all-tasks-overlay__close" data-all-tasks-close aria-label="Close All Tasks">
        ‚úï
      </button>
      <div class="all-tasks-overlay__body">
        <section class="card all-tasks-card" aria-live="polite" data-all-tasks-card>
          <button
            class="all-tasks-toggle"
            type="button"
            data-all-tasks-toggle
            aria-expanded="false"
            data-all-tasks-heading
          >
            <span id="allTasksOverlayTitle" class="all-tasks-toggle__title" data-all-tasks-title>All Tasks</span>
            <span class="all-tasks-toggle__meta">
              <span data-all-tasks-category>All categories</span>
              <span class="all-tasks-header__divider" data-all-tasks-divider aria-hidden="true">‚Ä¢</span>
              <span data-all-tasks-summary-text>0 active</span>
            </span>
            <span class="all-tasks-toggle__chevron" aria-hidden="true">‚ñ∏</span>
          </button>
          <div class="all-tasks-panel" data-all-tasks-panel hidden aria-hidden="true">
            <div class="task-list-header" id="taskListHeader">
              <label class="task-filter-field">
                <span class="task-filter-field__title">View</span>
                <select id="taskViewMode" class="task-view-select">
                  <option value="active" selected>Active Tasks</option>
                  <option value="completed">Completed Tasks</option>
                </select>
              </label>
              <label class="task-filter-field">
                <span class="task-filter-field__title">Category</span>
                <select id="taskCategoryFilter" class="task-view-select"></select>
              </label>
              <label class="task-filter-field">
                <span class="task-filter-field__title">Sort</span>
                <select id="taskSortMode" class="task-view-select">
                  <option value="priority" selected>Priority</option>
                  <option value="date-added-desc">Date added (newest)</option>
                  <option value="date-due-asc">Due date (soonest)</option>
                </select>
              </label>
              <label class="time-budget-control" for="timeBudget">
                I have
                <select id="timeBudget" data-field="time-budget">
                  <option value="">--</option>
                  <option value="15">15</option>
                  <option value="30">30</option>
                  <option value="60">60</option>
                </select>
                minutes
              </label>
            </div>
            <div class="ready-to-launch">
              <div class="task-section-head">
                <h3 class="task-section-title" data-ready-to-launch-title>Ready to Launch</h3>
              </div>
              <div id="taskList"></div>
              <button id="readyToLaunchMoreBtn" class="task-list-more-btn" type="button" aria-hidden="true">Show 5 more</button>
            </div>
          </div>
        </section>
      </div>
    </div>
  </section>
<div id="allTasksOverlay" class="hidden" aria-hidden="true">
  <div class="all-tasks-overlay__sheet" tabindex="-1">
    <header class="all-tasks-overlay__header">
      <h2>All Tasks</h2>
      <button id="closeAllTasksOverlay" aria-label="Close All Tasks">‚úñ</button>
    </header>

    <div class="all-tasks-overlay__body">
      <!-- Your task list goes here -->
    </div>
  </div>
</div>
  <nav class="command-bar" aria-label="Momentum shortcuts">
    <a href="#focus-engine" class="command-link">
      <span class="command-link__icon" aria-hidden="true">‚ö°</span>
      <span>Focus</span>
    </a>

    <button
      id="openAllTasksButton"
      class="command-link"
      type="button"
      aria-haspopup="dialog"
      aria-controls="allTasksOverlay"
      aria-expanded="false"
      data-command-all-tasks="true"
    >
      <span class="command-link__icon" aria-hidden="true">ü©∫</span>
      <span>Tasks</span>
    </button>
    <button
      id="resourcesToggle"
      class="command-link command-link--drawer"
      type="button"
      aria-haspopup="dialog"
      aria-controls="resourcesDrawer"
    >
      <span class="command-link__icon" aria-hidden="true">üìÅ</span>
      <span>Resources</span>
    </button>
    <a href="#reset-zone" class="command-link">
      <span class="command-link__icon" aria-hidden="true">üåô</span>
      <span>Reset</span>
    </a>
  </nav>
<script src="scripts/main.js" defer></script>
<script src="scripts/secondary.js" defer></script>
</body>
</html>
